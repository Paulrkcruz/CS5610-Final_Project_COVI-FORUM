{"ast":null,"code":"const MongoClient = require(\"mongodb\").MongoClient;\n\nconst config = require(\"./config\"); // Setup MongoDB\n// Terminal Error\n\n\nlet database;\n\nconst mongoDb = (uri, dbName) => {\n  const currentMongo = {}; // Set options\n\n  const options = {\n    useNewUrlParser: true,\n    useUnifiedTopology: true\n  }; // Start Client\n\n  currentMongo.client = new MongoClient(uri, options);\n  return new Promise(resolve => {\n    currentMongo.client.connect(err => {\n      if (err) throw err;\n      currentMongo.connection = currentMongo.client.db(dbName);\n      console.log(\"Successfully connected to Mongo DB.\");\n      resolve(currentMongo);\n    });\n  });\n}; // Initialize\n// This will be called before we start listening to express server\n\n\nconst initConnection = () => {\n  return new Promise(resolve => {\n    const uri = config.mongo.uri; // connect to our forum DB\n\n    mongoDb(uri, \"coviforum-boards\").then(db => {\n      database = db;\n      resolve();\n    });\n  });\n};\n\nconst getDatabase = () => {\n  return database;\n};\n\nmodule.exports = {\n  initConnection,\n  getDatabase\n};","map":{"version":3,"sources":["/Users/kurtiscruz/Desktop/GitHub/CS5610-Final_Project_COVI-FORUM/coviforum/server/configs/mongoClient.js"],"names":["MongoClient","require","config","database","mongoDb","uri","dbName","currentMongo","options","useNewUrlParser","useUnifiedTopology","client","Promise","resolve","connect","err","connection","db","console","log","initConnection","mongo","then","getDatabase","module","exports"],"mappings":"AAAA,MAAMA,WAAW,GAAGC,OAAO,CAAC,SAAD,CAAP,CAAmBD,WAAvC;;AACA,MAAME,MAAM,GAAGD,OAAO,CAAC,UAAD,CAAtB,C,CACA;AAEA;;;AACA,IAAIE,QAAJ;;AAEA,MAAMC,OAAO,GAAG,CAACC,GAAD,EAAMC,MAAN,KAAiB;AAC/B,QAAMC,YAAY,GAAG,EAArB,CAD+B,CAEjC;;AACE,QAAMC,OAAO,GAAG;AACdC,IAAAA,eAAe,EAAE,IADH;AAEdC,IAAAA,kBAAkB,EAAE;AAFN,GAAhB,CAH+B,CAOjC;;AACEH,EAAAA,YAAY,CAACI,MAAb,GAAsB,IAAIX,WAAJ,CAAgBK,GAAhB,EAAqBG,OAArB,CAAtB;AACA,SAAO,IAAII,OAAJ,CAAaC,OAAD,IAAa;AAC9BN,IAAAA,YAAY,CAACI,MAAb,CAAoBG,OAApB,CAA6BC,GAAD,IAAS;AACnC,UAAIA,GAAJ,EAAS,MAAMA,GAAN;AACTR,MAAAA,YAAY,CAACS,UAAb,GAA0BT,YAAY,CAACI,MAAb,CAAoBM,EAApB,CAAuBX,MAAvB,CAA1B;AAEAY,MAAAA,OAAO,CAACC,GAAR,CAAY,qCAAZ;AACAN,MAAAA,OAAO,CAACN,YAAD,CAAP;AACD,KAND;AAOD,GARM,CAAP;AASD,CAlBD,C,CAmBA;AACA;;;AACA,MAAMa,cAAc,GAAG,MAAM;AAC3B,SAAO,IAAIR,OAAJ,CAAaC,OAAD,IAAa;AAC9B,UAAMR,GAAG,GAAGH,MAAM,CAACmB,KAAP,CAAahB,GAAzB,CAD8B,CAE9B;;AACAD,IAAAA,OAAO,CAACC,GAAD,EAAM,kBAAN,CAAP,CAAiCiB,IAAjC,CAAuCL,EAAD,IAAQ;AAC5Cd,MAAAA,QAAQ,GAAGc,EAAX;AACAJ,MAAAA,OAAO;AACR,KAHD;AAID,GAPM,CAAP;AAQD,CATD;;AAUA,MAAMU,WAAW,GAAG,MAAM;AACxB,SAAOpB,QAAP;AACD,CAFD;;AAGAqB,MAAM,CAACC,OAAP,GAAiB;AAAEL,EAAAA,cAAF;AAAkBG,EAAAA;AAAlB,CAAjB","sourcesContent":["const MongoClient = require(\"mongodb\").MongoClient;\nconst config = require(\"./config\");\n// Setup MongoDB\n\n// Terminal Error\nlet database;\n\nconst mongoDb = (uri, dbName) => {\n  const currentMongo = {};\n// Set options\n  const options = {\n    useNewUrlParser: true,\n    useUnifiedTopology: true,\n  };\n// Start Client\n  currentMongo.client = new MongoClient(uri, options);\n  return new Promise((resolve) => {\n    currentMongo.client.connect((err) => {\n      if (err) throw err;\n      currentMongo.connection = currentMongo.client.db(dbName);\n\n      console.log(\"Successfully connected to Mongo DB.\");\n      resolve(currentMongo);\n    });\n  });\n};\n// Initialize\n// This will be called before we start listening to express server\nconst initConnection = () => {\n  return new Promise((resolve) => {\n    const uri = config.mongo.uri;\n    // connect to our forum DB\n    mongoDb(uri, \"coviforum-boards\").then((db) => {\n      database = db;\n      resolve();\n    });\n  });\n};\nconst getDatabase = () => {\n  return database;\n};\nmodule.exports = { initConnection, getDatabase };\n"]},"metadata":{},"sourceType":"script"}