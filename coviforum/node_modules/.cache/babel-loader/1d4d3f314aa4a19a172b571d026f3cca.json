{"ast":null,"code":"var _jsxFileName = \"/Users/kurtiscruz/Desktop/GitHub/CS5610-Final_Project_COVI-FORUM/coviforum/src/pages/board/index.js\";\nimport React, { useState, useEffect } from \"react\";\nimport \"./board.css\";\nimport { withRouter, Redirect } from \"react-router-dom\";\nimport { getBoard } from \"./board\";\nimport Loader from \"react-loader-spinner\";\nimport MsgList from \"../../components/board-msgs\";\nimport NewMsg from \"../../components/msgs\";\nimport Board from \"../../components/board\";\nimport ReactPaginate from \"react-paginate\"; // SOURCE FOR HELP: https://medium.com/@samwsoftware/building-a-forum-with-react-and-node-242a2a3c2995\n// BoardPage\n// Allows users to see the webpage with message boards\n\nconst BoardPage = props => {\n  // Set state\n  const [id, setId] = useState(undefined);\n  const [redirectToHome, setRedirectToHome] = useState(false);\n  const [boardLoaded, setBoardLoaded] = useState(false);\n  const [board, setBoard] = useState({});\n  const [msgs, setMsgs] = useState([]);\n  const [visibleMsgs, setVisibleMsgs] = useState([]);\n  const [currentPage, setCurrentPage] = useState(0);\n  const PER_PAGE = 10;\n  const offset = currentPage * PER_PAGE; // Handle clicks\n\n  function handlePageClick({\n    selected: selectedPage\n  }) {\n    setCurrentPage(selectedPage);\n  } // Setup Board Page\n\n\n  const initialSetup = () => {\n    if (props.location && props.location.state && props.location.state.boardId) {\n      setId(props.location.state.boardId);\n    } else if (props.match && props.match.params && props.match.params.board) {\n      setId(props.match.params.board);\n    } else {\n      setRedirectToHome(true);\n    }\n  }; // Set effects\n\n\n  useEffect(initialSetup, []);\n  useEffect(() => {\n    const currentPageData = msgs.slice(offset, offset + PER_PAGE);\n    setVisibleMsgs(currentPageData);\n  }, [currentPage, offset, msgs]);\n  useEffect(() => {\n    const getMsgs = () => {\n      getBoard(id).then(response => {\n        if (response.status === 200) {\n          if (response.data && response.data.length && response.data.length > 0) {\n            const temp = response.data[0];\n            temp.post = response.data[0].msgs[0];\n            temp.count = response.data[0].msgs.length;\n            setBoard(temp);\n            setMsgs(response.data[0].msgs);\n            setBoardLoaded(true);\n          }\n        } else if (response.status === 202) {\n          console.error(\"error\", response.data);\n        }\n      }).catch(error => {\n        console.error(error);\n      });\n    };\n\n    if (id) {\n      getMsgs();\n    }\n  }, [id]);\n\n  const addMsgToList = post => {\n    setMsgs(() => [...msgs, post]);\n  };\n\n  const scrollToNewMsg = () => {\n    const newMsg = document.getElementById(\"msgs\");\n    newMsg.scrollIntoView(true);\n  };\n\n  if (redirectToHome === true) {\n    return /*#__PURE__*/React.createElement(Redirect, {\n      to: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 12\n      }\n    });\n  }\n\n  return (\n    /*#__PURE__*/\n    // display board msgs\n    React.createElement(\"div\", {\n      className: \"board\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 5\n      }\n    }, boardLoaded ? /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Board, {\n      titleOfPage: true,\n      clickable: false,\n      board: board,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(ReactPaginate, {\n      previousLabel: \"← Previous\",\n      nextLabel: \"Next →\",\n      pageCount: Math.ceil(msgs.length / PER_PAGE),\n      onPageChange: handlePageClick,\n      containerClassName: \"pagination\",\n      previousLinkClassName: \"pagination__link\",\n      nextLinkClassName: \"pagination__link\",\n      disabledClassName: \"pagination__link--disabled\",\n      activeClassName: \"pagination__link--active\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(MsgList, {\n      msgs: visibleMsgs,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(ReactPaginate, {\n      previousLabel: \"← Previous\",\n      nextLabel: \"Next →\",\n      pageCount: Math.ceil(msgs.length / PER_PAGE),\n      onPageChange: handlePageClick,\n      containerClassName: \"pagination\",\n      previousLinkClassName: \"pagination__link\",\n      nextLinkClassName: \"pagination__link\",\n      disabledClassName: \"pagination__link--disabled\",\n      activeClassName: \"pagination__link--active\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"aside\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"create-new-post\",\n      onClick: scrollToNewMsg,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 17\n      }\n    }, \"New Message\"))), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(NewMsg, {\n      id: \"msgs\",\n      success: addMsgToList,\n      boardId: board.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 13\n      }\n    })) : /*#__PURE__*/React.createElement(Loader, {\n      type: \"Puff\",\n      color: \"#4f5d75;\",\n      height: 100,\n      width: 100,\n      className: \"loader\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 11\n      }\n    }))\n  );\n};\n\nexport default withRouter(BoardPage);","map":{"version":3,"sources":["/Users/kurtiscruz/Desktop/GitHub/CS5610-Final_Project_COVI-FORUM/coviforum/src/pages/board/index.js"],"names":["React","useState","useEffect","withRouter","Redirect","getBoard","Loader","MsgList","NewMsg","Board","ReactPaginate","BoardPage","props","id","setId","undefined","redirectToHome","setRedirectToHome","boardLoaded","setBoardLoaded","board","setBoard","msgs","setMsgs","visibleMsgs","setVisibleMsgs","currentPage","setCurrentPage","PER_PAGE","offset","handlePageClick","selected","selectedPage","initialSetup","location","state","boardId","match","params","currentPageData","slice","getMsgs","then","response","status","data","length","temp","post","count","console","error","catch","addMsgToList","scrollToNewMsg","newMsg","document","getElementById","scrollIntoView","Math","ceil"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport \"./board.css\";\nimport { withRouter, Redirect } from \"react-router-dom\";\nimport { getBoard } from \"./board\";\nimport Loader from \"react-loader-spinner\";\nimport MsgList from \"../../components/board-msgs\";\nimport NewMsg from \"../../components/msgs\";\nimport Board from \"../../components/board\";\nimport ReactPaginate from \"react-paginate\";\n// SOURCE FOR HELP: https://medium.com/@samwsoftware/building-a-forum-with-react-and-node-242a2a3c2995\n// BoardPage\n// Allows users to see the webpage with message boards\nconst BoardPage = (props) => {\n// Set state\n  const [id, setId] = useState(undefined);\n  const [redirectToHome, setRedirectToHome] = useState(false);\n  const [boardLoaded, setBoardLoaded] = useState(false);\n  const [board, setBoard] = useState({});\n  const [msgs, setMsgs] = useState([]);\n  const [visibleMsgs, setVisibleMsgs] = useState([]);\n  const [currentPage, setCurrentPage] = useState(0);\n  const PER_PAGE = 10;\n  const offset = currentPage * PER_PAGE;\n// Handle clicks\n  function handlePageClick({ selected: selectedPage }) {\n    setCurrentPage(selectedPage);\n  }\n// Setup Board Page\n  const initialSetup = () => {\n    if (\n      props.location &&\n      props.location.state &&\n      props.location.state.boardId\n    ) {\n      setId(props.location.state.boardId);\n    } else if (props.match && props.match.params && props.match.params.board) {\n      setId(props.match.params.board);\n    } else {\n      setRedirectToHome(true);\n    }\n  };\n// Set effects\n  useEffect(initialSetup, []);\n  useEffect(() => {\n    const currentPageData = msgs.slice(offset, offset + PER_PAGE);\n    setVisibleMsgs(currentPageData);\n  }, [currentPage, offset, msgs]);\n\n  useEffect(() => {\n    const getMsgs = () => {\n      getBoard(id)\n        .then((response) => {\n          if (response.status === 200) {\n            if (\n              response.data &&\n              response.data.length &&\n              response.data.length > 0\n            ) {\n              const temp = response.data[0];\n              temp.post = response.data[0].msgs[0];\n              temp.count = response.data[0].msgs.length;\n\n              setBoard(temp);\n              setMsgs(response.data[0].msgs);\n              setBoardLoaded(true);\n            }\n          } else if (response.status === 202) {\n            console.error(\"error\", response.data);\n          }\n        })\n        .catch((error) => {\n          console.error(error);\n        });\n    };\n    if (id) {\n      getMsgs();\n    }\n  }, [id]);\n  const addMsgToList = (post) => {\n    setMsgs(() => [...msgs, post]);\n  };\n  const scrollToNewMsg = () => {\n    const newMsg = document.getElementById(\"msgs\");\n    newMsg.scrollIntoView(true);\n  };\n  if (redirectToHome === true) {\n    return <Redirect to=\"/\" />;\n  }\n  return (\n  // display board msgs\n    <div className=\"board\">\n      {\n        boardLoaded ? (\n          <div>\n            <Board titleOfPage={true} clickable={false} board={board} />\n\n            <div className=\"content\">\n              <ReactPaginate\n                previousLabel={\"← Previous\"}\n                nextLabel={\"Next →\"}\n                pageCount={Math.ceil(msgs.length / PER_PAGE)}\n                onPageChange={handlePageClick}\n                containerClassName={\"pagination\"}\n                previousLinkClassName={\"pagination__link\"}\n                nextLinkClassName={\"pagination__link\"}\n                disabledClassName={\"pagination__link--disabled\"}\n                activeClassName={\"pagination__link--active\"}\n              />\n              <MsgList msgs={visibleMsgs} />\n              <ReactPaginate\n                previousLabel={\"← Previous\"}\n                nextLabel={\"Next →\"}\n                pageCount={Math.ceil(msgs.length / PER_PAGE)}\n                onPageChange={handlePageClick}\n                containerClassName={\"pagination\"}\n                previousLinkClassName={\"pagination__link\"}\n                nextLinkClassName={\"pagination__link\"}\n                disabledClassName={\"pagination__link--disabled\"}\n                activeClassName={\"pagination__link--active\"}\n              />\n              <div className=\"aside\">\n                <button className=\"create-new-post\" onClick={scrollToNewMsg}>\n                  New Message\n                </button>\n              </div>\n            </div>\n\n            <br />\n            <NewMsg\n              id=\"msgs\"\n              success={addMsgToList}\n              boardId={board.id}\n            />\n          </div>\n        ) : (\n          <Loader\n            type=\"Puff\"\n            color=\"#4f5d75;\"\n            height={100}\n            width={100}\n            className=\"loader\"\n          />\n        )\n      }\n    </div>\n  );\n};\n\nexport default withRouter(BoardPage);\n"]},"metadata":{},"sourceType":"module"}